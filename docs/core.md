# 开发说明

## 包

包和类的命名基于以下规则：

|命名/所在包|序列化性|含业务函数|在core项目内使用|在core项目外使用|
|------|------|------|------|------|
|Model  |不支持序列化|有|仅业务层|不应使用|
|Prototype|@Data    |无|所有层|可使用|
|View   |@Data      |无|仅视图层|可使用|

## 比赛前准备

介绍暂略，开发者可使用预设的队伍，跳过这一步。

## 比赛中

### MatchSituationView

比赛相关api每次正常返回的payload是一个MatchSituationView。其中会放入会放入本次请求引发迁移时产生的MatchEvent子类，和迁移后的MatchState，和其他数据。

### MatchState

只会因客户端的请求而发生迁移，迁移时会产生若干MatchEvent子类。

其可构成一个Mealy型状态机：

[![](https://mermaid.ink/img/eyJjb2RlIjoiZmxvd2NoYXJ0IFREXG4gICAgY2xhc3NEZWYgc3RhdGVDb2xvciBmaWxsOiNmODgsc3Ryb2tlOiMzMzMsc3Ryb2tlLXdpZHRoOjNweFxuICAgIGNsYXNzRGVmIGV2ZW50Q29sb3IgZmlsbDojNEFGLHN0cm9rZTojMzMzLHN0cm9rZS13aWR0aDozcHhcblxuICAgIFN0YXJ0TWF0Y2hFdmVudChTdGFydE1hdGNoRXZlbnQpOjo6ZXZlbnRDb2xvclxuICAgIFN3aXRjaFF1ZXN0aW9uRXZlbnQoU3dpdGNoUXVlc3Rpb25FdmVudCk6OjpldmVudENvbG9yXG4gICAgU2tpbGxSZXN1bHRFdmVudChTa2lsbFJlc3VsdEV2ZW50KTo6OmV2ZW50Q29sb3JcbiAgICBBbnN3ZXJSZXN1bHRFdmVudChBbnN3ZXJSZXN1bHRFdmVudCk6OjpldmVudENvbG9yXG4gICAgU3dpdGNoVGVhbUV2ZW50KFN3aXRjaFRlYW1FdmVudCk6OjpldmVudENvbG9yXG4gICAgRmluaXNoRXZlbnQoRmluaXNoRXZlbnQpOjo6ZXZlbnRDb2xvclxuXG4gICAgV0FJVF9TVEFSVChbXCLmr5TotZvmnKrlvIDlp4s8YnI-TWF0Y2hTdGF0ZS5XQUlUX1NUQVJUXCJdKTo6OnN0YXRlQ29sb3JcbiAgICBXQUlUX0dFTkVSQVRFX1FVRVNUSU9OKFtcIuW-heWPlumimDxicj5NYXRjaFN0YXRlLldBSVRfR0VORVJBVEVfUVVFU1RJT05cIl0pOjo6c3RhdGVDb2xvclxuICAgIFdBSVRfQU5TV0VSKFtcIuW-heetlOmimDxicj5NYXRjaFN0YXRlLldBSVRfQU5TV0VSXCJdKTo6OnN0YXRlQ29sb3JcbiAgICBGSU5JU0hFRChbXCLmr5TotZvlt7Lnu5PmnZ88YnI-TWF0Y2hTdGF0ZS5GSU5JU0hFRFwiXSk6OjpzdGF0ZUNvbG9yXG5cbiAgICBmb3JrKFtcIuS4tOaXtuaAgVwiXSlcbiAgICBqb2luKFtcIuS4tOaXtuaAgVwiXSlcblxuICAgIFdBSVRfU1RBUlQgLS0-IHzlvIDlp4vlkb3ku6R8U3RhcnRNYXRjaEV2ZW50XG4gICAgU3RhcnRNYXRjaEV2ZW50IC0tPiBXQUlUX0dFTkVSQVRFX1FVRVNUSU9OXG5cbiAgICBXQUlUX0dFTkVSQVRFX1FVRVNUSU9OIC0tPiB85Y-W6aKY5ZG95LukfFN3aXRjaFF1ZXN0aW9uRXZlbnRcbiAgICBTd2l0Y2hRdWVzdGlvbkV2ZW50IC0tPiBXQUlUX0FOU1dFUlxuXG4gICAgV0FJVF9BTlNXRVIgLS0-IHzkvb_nlKjmioDog73lkb3ku6R8U2tpbGxSZXN1bHRFdmVudFxuICAgIFNraWxsUmVzdWx0RXZlbnQgLS0-IFdBSVRfQU5TV0VSXG4gICAgV0FJVF9BTlNXRVIgLS0-IHzmraPluLjnrZTpopgv6LaF5pe2L-i3s-i_h3xBbnN3ZXJSZXN1bHRFdmVudFxuICAgIEFuc3dlclJlc3VsdEV2ZW50IC0tPiBmb3JrXG5cbiAgICBmb3JrIC0tPiB85ruh6Laz5q-U6LWb57uT5p2f5p2h5Lu2fEZpbmlzaEV2ZW50XG4gICAgZm9yayAtLT4gfOa7oei2s-aNoumYn-adoeS7tnxTd2l0Y2hUZWFtRXZlbnRcbiAgICBmb3JrIC0tPiB85YW25LuWfGpvaW5cblxuICAgIFN3aXRjaFRlYW1FdmVudCAtLT4gam9pblxuICAgIGpvaW4gLS0-IFdBSVRfR0VORVJBVEVfUVVFU1RJT05cblxuICAgIEZpbmlzaEV2ZW50IC0tPiBGSU5JU0hFRCIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2UsImF1dG9TeW5jIjp0cnVlLCJ1cGRhdGVEaWFncmFtIjpmYWxzZX0)](https://mermaid-js.github.io/mermaid-live-editor/edit##eyJjb2RlIjoiZmxvd2NoYXJ0IFREXG4gICAgY2xhc3NEZWYgc3RhdGVDb2xvciBmaWxsOiNmODgsc3Ryb2tlOiMzMzMsc3Ryb2tlLXdpZHRoOjNweFxuICAgIGNsYXNzRGVmIGV2ZW50Q29sb3IgZmlsbDojNEFGLHN0cm9rZTojMzMzLHN0cm9rZS13aWR0aDozcHhcblxuICAgIFN0YXJ0TWF0Y2hFdmVudChcIiBcIik6OjpldmVudENvbG9yXG4gICAgU3dpdGNoUXVlc3Rpb25FdmVudChcIiBcIik6OjpldmVudENvbG9yXG4gICAgU2tpbGxSZXN1bHRFdmVudChcIiBcIik6OjpldmVudENvbG9yXG4gICAgQW5zd2VyUmVzdWx0RXZlbnQoXCIgXCIpOjo6ZXZlbnRDb2xvclxuICAgIFN3aXRjaFRlYW1FdmVudChcIiBcIik6OjpldmVudENvbG9yXG4gICAgRmluaXNoRXZlbnQoXCIgXCIpOjo6ZXZlbnRDb2xvclxuXG4gICAgV0FJVF9TVEFSVChbXCLmr5TotZvmnKrlvIDlp4tcIl0pOjo6c3RhdGVDb2xvclxuICAgIFdBSVRfR0VORVJBVEVfUVVFU1RJT04oW1wi5b6F5Y-W6aKYXCJdKTo6OnN0YXRlQ29sb3JcbiAgICBXQUlUX0FOU1dFUihbXCLlvoXnrZTpophcIl0pOjo6c3RhdGVDb2xvclxuICAgIEZJTklTSEVEKFtcIuavlOi1m-W3sue7k-adn1wiXSk6OjpzdGF0ZUNvbG9yXG5cbiAgICBmb3JrKFtcIuS4tOaXtuaAgVwiXSlcbiAgICBqb2luKFtcIuS4tOaXtuaAgVwiXSlcblxuICAgIFdBSVRfU1RBUlQgLS0-IHzlvIDlp4vlkb3ku6R8U3RhcnRNYXRjaEV2ZW50XG4gICAgU3RhcnRNYXRjaEV2ZW50IC0tPiBXQUlUX0dFTkVSQVRFX1FVRVNUSU9OXG5cbiAgICBXQUlUX0dFTkVSQVRFX1FVRVNUSU9OIC0tPiB85Y-W6aKY5ZG95LukfFN3aXRjaFF1ZXN0aW9uRXZlbnRcbiAgICBTd2l0Y2hRdWVzdGlvbkV2ZW50IC0tPiBXQUlUX0FOU1dFUlxuXG4gICAgV0FJVF9BTlNXRVIgLS0-IHzkvb_nlKjmioDog73lkb3ku6R8U2tpbGxSZXN1bHRFdmVudFxuICAgIFNraWxsUmVzdWx0RXZlbnQgLS0-IFdBSVRfQU5TV0VSXG4gICAgV0FJVF9BTlNXRVIgLS0-IHzmraPluLjnrZTpopgv6LaF5pe2L-i3s-i_h3xBbnN3ZXJSZXN1bHRFdmVudFxuICAgIEFuc3dlclJlc3VsdEV2ZW50IC0tPiBmb3JrXG5cbiAgICBmb3JrIC0tPiB85ruh6Laz5q-U6LWb57uT5p2f5p2h5Lu2fEZpbmlzaEV2ZW50XG4gICAgZm9yayAtLT4gfOa7oei2s-aNoumYn-adoeS7tnxTd2l0Y2hUZWFtRXZlbnRcbiAgICBmb3JrIC0tPiB85YW25LuWfGpvaW5cblxuICAgIFN3aXRjaFRlYW1FdmVudCAtLT4gam9pblxuICAgIGpvaW4gLS0-IFdBSVRfR0VORVJBVEVfUVVFU1RJT05cblxuICAgIEZpbmlzaEV2ZW50IC0tPiBGSU5JU0hFRFxuXG4gICAgRklOSVNIRUQgLS0-IFdBSVRfU1RBUlQiLCJtZXJtYWlkIjoie1xuICBcInRoZW1lXCI6IFwiZGVmYXVsdFwiXG59IiwidXBkYXRlRWRpdG9yIjpmYWxzZSwiYXV0b1N5bmMiOnRydWUsInVwZGF0ZURpYWdyYW0iOmZhbHNlfQ)


